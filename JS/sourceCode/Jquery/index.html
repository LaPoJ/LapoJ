<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Jquery源码解析 旅梦源码课</title>
  <style>
    *{
      margin: 0;
      padding: 0;
    }

  </style>
</head>
<body>
  <div id="root"></div>
  <img src="https://pic.36krcnd.com/201904/09061934/9axl9yt10w5w6kq6!heading" alt="">
  <script src="https://cdn.bootcss.com/jquery/2.1.2/jquery.min.js"></script>
  <script>
    // 当html css 文件比较大时，加载时间偏长
    // http请求：本身、img图片请求、JQ请求
    window.onload = function() {
      console.log('页面加载完成');
    }

    function imgLoaded() {
      console.log('图片加载完成');
    }

    // document.addEventListener('DOMContentLoaded',function() {
    //   console.log('DOM ready');
    // })
    // JQuery API简约，更好的兼容性
    // DOMContentLoaded事件在IE中有兼容性问题

    function JQueryEle(ele) {
      this.ele = ele;
    }

    JQueryEle.prototype.html = function (str) {
      this.ele.innerHTML = str;
    }

    function $(selector) {
      if(typeof selector === 'function'){
        document.addEventListener('DOMContentLoaded',selector);
      }else if(typeof selector === 'string'){
        // $函数 .html方法，放弃prototype写法， html方法来自于节点对象
        // $函数运行有返回值,返回值是对象
        const ele = document.querySelector(selector);
        if (ele) {
          // JQueryEle对象
          return new jQueryEle(ele);
        }
        return ele;
      }
    }

    $(function() {
      console.log('DOM ready');
      $('#root').html('<p>我不想去缅甸</p>');
    })
  </script>
</body>
</html>